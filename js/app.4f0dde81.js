(function(e){function t(t){for(var i,s,a=t[0],o=t[1],r=t[2],u=0,g=[];u<a.length;u++)s=a[u],c[s]&&g.push(c[s][0]),c[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);l&&l(t);while(g.length)g.shift()();return p.push.apply(p,r||[]),n()}function n(){for(var e,t=0;t<p.length;t++){for(var n=p[t],i=!0,a=1;a<n.length;a++){var o=n[a];0!==c[o]&&(i=!1)}i&&(p.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},c={app:0},p=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var r=0;r<a.length;r++)t(a[r]);var l=o;p.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("2d14")},"1b7c":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"bg-blur",style:{backgroundImage:"url("+e.puzzleData.bgImgUrl+")"}}),e.isClear?e._e():[i("div",{key:"0",style:{"z-index":e.zIndex+1},attrs:{id:"title"}},[i("h1",[e._v("請完成這幅《"+e._s(e.puzzleData.name)+"》")])]),i("button",{key:"1",style:{"z-index":e.zIndex+1},attrs:{id:"reset"},on:{click:e.reset}},[e._v("重新排列")])],e.isComplete?e._e():i("div",{key:"2",attrs:{id:"puzzle-content"}},e._l(e.puzzleData.puzzlePos,function(t,n){return i("div",{directives:[{name:"drag",rawName:"v-drag"}],key:n+10,staticClass:"puzzle",attrs:{"data-combine":""},on:{mousedown:e.changeZIdx,mouseup:e.getSiblsPos}},[i("img",{style:{position:"absolute",top:t.y+"px",left:t.x+"px"},attrs:{src:e.puzzleImg(n)}})])}),0),i("div",{key:"3",attrs:{id:"complete-puzzle"}},[e.isComplete?i("img",{staticClass:"picture",attrs:{src:n("1bab"),alt:"清本院清明上河圖"}}):e._e()]),e.isClear?i("div",{key:"4",attrs:{id:"intro"}},[i("h1",[e._v(e._s(e.puzzleData.fullName))]),i("h2",[e._v(e._s(e.puzzleData.author))]),i("h2",[e._v(e._s(e.puzzleData.age))]),i("div",{staticClass:"inform"},e._l(e.puzzleData.inform,function(t,n){return i("p",{key:n},[e._v(e._s(t))])}),0),i("button",{staticClass:"again",on:{click:e.playAgain}},[e._v("在玩一次")])]):e._e()],2)},c=[],p=n("ed45"),s=(n("843a"),n("f2c5"),n("d8c4"),n("99aa"),{data:function(){return{zIndex:10,isClear:!1,isComplete:!1,siblsIdxArr:[],puzzleData:{name:"清明上河圖",xNum:3,yNum:3,bgImgUrl:n("a6d7"),puzzleUrl:"./image/Puzzle-",puzzlePos:[{y:0,x:0},{y:0,x:-27},{y:0,x:0},{y:0,x:0},{y:-27,x:0},{y:0,x:-27},{y:-27,x:0},{y:0,x:-27},{y:-27,x:0}],fullName:"清本院清明上河圖",author:"陳枚、孫祜、金昆、戴洪、程志道",age:"清高宗乾隆元年（1736）",inform:["宋張澤端（活動於西元十二世紀前期）「清明上河圖」是畫史中寫實風俗畫的一件傑作，歷代臨仿者甚多，在故宮即藏有七種不同的本子，其中就屬清院本「清明上河圖」最為有名。","此卷為乾隆元年（一七三六）由宮廷畫院畫師陳枚、孫祜、金昆、戴洪、程志道等五人合繪。 此卷設色鮮麗，用筆圓熟，界畫橋樑、屋宇及人物皆十分細膩嚴謹，是院畫中之極精者。所畫事物甚多，雖失去了宋代古制，但也足以代表明清之際北京風物。"]}}},methods:{puzzleImg:function(e){var t=n("52c9")("".concat(this.puzzleData.puzzleUrl).concat(e+1,".png"));return t},getSiblsIdxArr:function(){for(var e=[],t=this.puzzleData.xNum,n=this.puzzleData.xNum*this.puzzleData.yNum,i=0;i<n;i++){switch(i%t){case 0:e=[i-t,i+1,i+t];break;case t-1:e=[i-t,i-1,i+t];break;default:e=[i-t,i-1,i+1,i+t]}e=e.filter(function(e){return e>=0&&e<n}),this.siblsIdxArr.push(e)}},setData:function(){document.querySelectorAll(".puzzle").forEach(function(e,t){e.setAttribute("data-combine",t)})},changeZIdx:function(e){var t=this,n=document.querySelectorAll(".puzzle"),i=JSON.parse("[".concat(n[Object(p["a"])(n).indexOf(e.currentTarget)].getAttribute("data-combine"),"]"));i.forEach(function(e){n[e].style.zIndex=t.zIndex}),this.zIndex++},combine:function(e,t,n,i,c){var p=n[e],s=n[t],a=this.siblsIdxArr,o=JSON.parse("[".concat(p.getAttribute("data-combine"),"]")),r=JSON.parse("[".concat(s.getAttribute("data-combine"),"]"));o.forEach(function(e){r.forEach(function(t){a[e].indexOf(t)>=0&&a[e].splice(a[e].indexOf(t),1),a[t].indexOf(e)>=0&&a[t].splice(a[t].indexOf(e),1)})}),this.combinePuzzle(p,s,n,i,c,o,r),this.combineData(p,s,n)},combinePuzzle:function(e,t,n,i,c,p,s){var a=parseInt(e.style.top),o=parseInt(e.style.left),r=parseInt(t.style.top),l=parseInt(t.style.left),u=[],g=s.length;s.forEach(function(e){u.push({top:parseInt(n[e].style.top)-r,left:parseInt(n[e].style.left)-l})});for(var d=0;d<g;d++){var b=s[d];n[b].style.top=a+i+u[d].top+"px",n[b].style.left=o+c+u[d].left+"px"}p.forEach(function(e){n[e].classList.add("box-shadow"),setTimeout(function(){n[e].classList.remove("box-shadow")},500)}),s.forEach(function(e){n[e].classList.add("box-shadow"),setTimeout(function(){n[e].classList.remove("box-shadow")},500)})},combineData:function(e,t,n){for(var i="".concat(e.getAttribute("data-combine"),", ").concat(t.getAttribute("data-combine")),c=JSON.parse("[".concat(e.getAttribute("data-combine"),"]")),p=JSON.parse("[".concat(t.getAttribute("data-combine"),"]")),s=c.length,a=p.length,o=0;o<s;o++){var r=c[o];n[r].setAttribute("data-combine",i)}for(var l=0;l<a;l++){var u=p[l];n[u].setAttribute("data-combine",i)}},complete:function(){var e=this;setTimeout(function(){var t=document.querySelector(".puzzle"),n=document.querySelector("#complete-puzzle"),i=document.querySelector("#title"),c=document.querySelector("#reset"),p=document.getElementById("app").scrollWidth,s=document.getElementById("app").scrollHeight;e.isComplete=!0,n.style.top="".concat(parseInt(t.style.top)+18.5,"px"),n.style.left="".concat(parseInt(t.style.left)+18.5,"px"),n.style.transform="translate(".concat((p-580)/2-parseInt(n.style.left),"px, ").concat((s-580)/2-parseInt(n.style.top)+18.5,"px)"),i.style.opacity=0,c.style.opacity=0,setTimeout(function(){e.isClear=!0,document.querySelector(".picture").classList.add("box-shadow"),setTimeout(function(){var e=document.querySelector("#intro"),t=e.offsetWidth,i=30;e.style.opacity=1,e.style.transform="translateX( ".concat((540+i)/2,"px )"),document.querySelector("#complete-puzzle").style.transform="translate(".concat((p-580)/2-parseInt(n.style.left)-(t+i)/2,"px, ").concat((s-580)/2-parseInt(n.style.top)+18.5,"px)")},1300)},2e3)},1e3)},getSiblsPos:function(e){var t=this,n=document.querySelectorAll(".puzzle"),i=JSON.parse("[".concat(e.currentTarget.getAttribute("data-combine"),"]")),c=this.puzzleData.xNum;i.forEach(function(e){var i=n[e].offsetTop,p=n[e].offsetLeft;t.siblsIdxArr[e].forEach(function(s){switch(s-e){case c:Math.abs(n[s].offsetTop-i-144)<8&&Math.abs(n[s].offsetLeft-p)<8&&t.combine(s,e,n,-144,0);break;case 1:Math.abs(n[s].offsetTop-i)<8&&Math.abs(n[s].offsetLeft-p-144)<8&&t.combine(s,e,n,0,-144);break;case-1:Math.abs(n[s].offsetTop-i)<8&&Math.abs(n[s].offsetLeft-p+144)<8&&t.combine(s,e,n,-0,144);break;case-c:Math.abs(n[s].offsetTop-i+144)<8&&Math.abs(n[s].offsetLeft-p)<8&&t.combine(s,e,n,144,0);break}})});var p=JSON.parse("[".concat(e.currentTarget.getAttribute("data-combine"),"]"));9==p.length&&this.complete()},reset:function(){var e=this.puzzleData.xNum*this.puzzleData.yNum,t=document.getElementById("app").scrollWidth,n=document.getElementById("app").scrollHeight;this.zIndex=10,this.siblsIdxArr=[],this.isClear=!1,this.isComplete=!1;for(var i=0;i<e;i++){var c=document.querySelectorAll(".puzzle")[i],p=c.offsetWidth,s=c.offsetHeight,a=100+(n-s-200)*Math.random(),o=(t-p)*Math.random(),r=Math.floor(10*Math.random());c.style.top=a+"px",c.style.left=o+"px",c.style.zIndex=r,c.style.opacity=1}this.setData(),this.getSiblsIdxArr()},checkPuzzle:function(){var e=this;null==document.querySelector(".puzzle")?setTimeout(function(){e.checkPuzzle()},100):(this.reset(),this.getSiblsIdxArr(),this.setData())},playAgain:function(){this.isClear=!1,this.isComplete=!1,document.querySelector("#complete-puzzle").style.transform="scale(.8)",document.querySelector("#intro").style.transform="",this.checkPuzzle()}},mounted:function(){this.reset(),this.getSiblsIdxArr(),this.setData()},directives:{drag:function(e){e.onmousedown=function(t){t.stopPropagation();var n=document.querySelectorAll(".puzzle"),i=[];i=JSON.parse("[".concat(e.getAttribute("data-combine"),"]"));for(var c=i.length,p=[],s=0;s<c;s++){for(var a=s+1;a<c;a++)i[s]==i[a]&&(a=++s);p.push(i[s])}for(var o=[],r=document.getElementById("app").scrollWidth,l=document.getElementById("app").scrollHeight,u=e.offsetHeight,g=e.offsetWidth,d=p.length,b=0;b<d;b++){var f=p[b];o.push({x:t.clientX-n[f].offsetLeft,y:t.clientY-n[f].offsetTop})}document.onmousemove=function(e){e.preventDefault();for(var t=!0,i=0;i<d;i++)if(e.clientX-o[i].x<0||r-e.clientX+o[i].x-g<0||e.clientY-o[i].y<0||l-e.clientY+o[i].y-u<0){t=!1;break}if(t)for(var c=0;c<d;c++){var s=p[c];n[s].style.left=e.clientX-o[c].x+"px",n[s].style.top=e.clientY-o[c].y+"px"}},document.onmouseup=function(){document.onmousemove=null}}}}}),a=s,o=(n("63f7"),n("f9e0")),r=Object(o["a"])(a,i,c,!1,null,null,null);t["a"]=r.exports},"1bab":function(e,t,n){e.exports=n.p+"img/img-Qingming.80bd3aeb.png"},"52c9":function(e,t,n){var i={"./image/Puzzle-1.png":"72d4","./image/Puzzle-2.png":"d351","./image/Puzzle-3.png":"e81e","./image/Puzzle-4.png":"9772","./image/Puzzle-5.png":"6512","./image/Puzzle-6.png":"5aba","./image/Puzzle-7.png":"dade","./image/Puzzle-8.png":"a547","./image/Puzzle-9.png":"cc07","./image/img-Qingming.png":"1bab","./image/img-bg-Qingming.png":"a6d7","async-limiter/coverage/lcov-report/sort-arrow-sprite.png":"ff2f","js-base64/1x1.png":"efc7","mute-stream/coverage/lcov-report/sort-arrow-sprite.png":"dd8c","serve-index/public/icons/application_xp.png":"fb2b","serve-index/public/icons/application_xp_terminal.png":"d09b","serve-index/public/icons/box.png":"fe8c","serve-index/public/icons/cd.png":"a952","serve-index/public/icons/controller.png":"8e63","serve-index/public/icons/drive.png":"501d","serve-index/public/icons/film.png":"c235","serve-index/public/icons/folder.png":"df24","serve-index/public/icons/font.png":"9b2f","serve-index/public/icons/image.png":"54c3","serve-index/public/icons/map.png":"606e","serve-index/public/icons/page.png":"1064","serve-index/public/icons/page_add.png":"855f","serve-index/public/icons/page_attach.png":"a60f","serve-index/public/icons/page_code.png":"8e1b","serve-index/public/icons/page_copy.png":"7093","serve-index/public/icons/page_delete.png":"6405","serve-index/public/icons/page_edit.png":"c7a7","serve-index/public/icons/page_error.png":"190b","serve-index/public/icons/page_excel.png":"958e","serve-index/public/icons/page_find.png":"a4fc","serve-index/public/icons/page_gear.png":"b18e","serve-index/public/icons/page_go.png":"6151","serve-index/public/icons/page_green.png":"4ca6","serve-index/public/icons/page_key.png":"ffc7","serve-index/public/icons/page_lightning.png":"1055","serve-index/public/icons/page_link.png":"ab79","serve-index/public/icons/page_paintbrush.png":"d107","serve-index/public/icons/page_paste.png":"cf64","serve-index/public/icons/page_red.png":"f53b","serve-index/public/icons/page_refresh.png":"6762","serve-index/public/icons/page_save.png":"a117","serve-index/public/icons/page_white.png":"08e3","serve-index/public/icons/page_white_acrobat.png":"5431","serve-index/public/icons/page_white_actionscript.png":"4731","serve-index/public/icons/page_white_add.png":"4776","serve-index/public/icons/page_white_c.png":"1614","serve-index/public/icons/page_white_camera.png":"02ce","serve-index/public/icons/page_white_cd.png":"c760","serve-index/public/icons/page_white_code.png":"5992","serve-index/public/icons/page_white_code_red.png":"6d8e","serve-index/public/icons/page_white_coldfusion.png":"640e","serve-index/public/icons/page_white_compressed.png":"5e64","serve-index/public/icons/page_white_copy.png":"02ab","serve-index/public/icons/page_white_cplusplus.png":"7ff9","serve-index/public/icons/page_white_csharp.png":"281f","serve-index/public/icons/page_white_cup.png":"c3fd","serve-index/public/icons/page_white_database.png":"e3b4","serve-index/public/icons/page_white_delete.png":"87db","serve-index/public/icons/page_white_dvd.png":"e0be","serve-index/public/icons/page_white_edit.png":"8eb3c","serve-index/public/icons/page_white_error.png":"e00a","serve-index/public/icons/page_white_excel.png":"618d","serve-index/public/icons/page_white_find.png":"5bad","serve-index/public/icons/page_white_flash.png":"d57a","serve-index/public/icons/page_white_freehand.png":"6f68","serve-index/public/icons/page_white_gear.png":"f8dc","serve-index/public/icons/page_white_get.png":"e5a5","serve-index/public/icons/page_white_go.png":"83c7","serve-index/public/icons/page_white_h.png":"83a2","serve-index/public/icons/page_white_horizontal.png":"8fdd","serve-index/public/icons/page_white_key.png":"c0c2","serve-index/public/icons/page_white_lightning.png":"6c81","serve-index/public/icons/page_white_link.png":"b24c","serve-index/public/icons/page_white_magnify.png":"fe93","serve-index/public/icons/page_white_medal.png":"8c2e","serve-index/public/icons/page_white_office.png":"eb33","serve-index/public/icons/page_white_paint.png":"120b","serve-index/public/icons/page_white_paintbrush.png":"f544","serve-index/public/icons/page_white_paste.png":"ed71","serve-index/public/icons/page_white_php.png":"0b2f","serve-index/public/icons/page_white_picture.png":"73ff","serve-index/public/icons/page_white_powerpoint.png":"8efe","serve-index/public/icons/page_white_put.png":"644d","serve-index/public/icons/page_white_ruby.png":"6f13","serve-index/public/icons/page_white_stack.png":"6f82","serve-index/public/icons/page_white_star.png":"3ce6","serve-index/public/icons/page_white_swoosh.png":"bb10","serve-index/public/icons/page_white_text.png":"7444","serve-index/public/icons/page_white_text_width.png":"2955","serve-index/public/icons/page_white_tux.png":"2b6f","serve-index/public/icons/page_white_vector.png":"5bf07","serve-index/public/icons/page_white_visualstudio.png":"dcee","serve-index/public/icons/page_white_width.png":"c047","serve-index/public/icons/page_white_word.png":"c3d4","serve-index/public/icons/page_white_world.png":"809e","serve-index/public/icons/page_white_wrench.png":"12a8","serve-index/public/icons/page_white_zip.png":"15e4","serve-index/public/icons/page_word.png":"a02a","serve-index/public/icons/page_world.png":"6207","tar/coverage/lcov-report/sort-arrow-sprite.png":"11a2"};function c(e){var t=p(e);return n(t)}function p(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}c.keys=function(){return Object.keys(i)},c.resolve=p,e.exports=c,c.id="52c9"},"5aba":function(e,t,n){e.exports=n.p+"img/Puzzle-6.fe7f952e.png"},"63f7":function(e,t,n){"use strict";var i=n("db33"),c=n.n(i);c.a},6512:function(e,t,n){e.exports=n.p+"img/Puzzle-5.45db749a.png"},"72d4":function(e,t,n){e.exports=n.p+"img/Puzzle-1.8be42a3d.png"},9772:function(e,t,n){e.exports=n.p+"img/Puzzle-4.0665b315.png"},a547:function(e,t,n){e.exports=n.p+"img/Puzzle-8.127c48bc.png"},a6d7:function(e,t,n){e.exports=n.p+"img/img-bg-Qingming.3ddb7040.png"},cc07:function(e,t,n){e.exports=n.p+"img/Puzzle-9.0b17772a.png"},d351:function(e,t,n){e.exports=n.p+"img/Puzzle-2.1d8a2d71.png"},dade:function(e,t,n){e.exports=n.p+"img/Puzzle-7.bce2bb87.png"},db33:function(e,t,n){},e81e:function(e,t,n){e.exports=n.p+"img/Puzzle-3.c648690d.png"}});
//# sourceMappingURL=app.4f0dde81.js.map