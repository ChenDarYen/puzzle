(function(t){function e(e){for(var a,l,i=e[0],s=e[1],c=e[2],f=0,p=[];f<i.length;f++)l=i[f],r[l]&&p.push(r[l][0]),r[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(a=!1)}a&&(o.splice(e--,1),t=l(l.s=n[0]))}return t}var a={},r={app:0},o=[];function l(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=a,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(n,a,function(e){return t[e]}.bind(null,a));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("2d14")},"1b7c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"bg-blur",style:{backgroundImage:"url("+t.puzzleData.bgImgUrl+")"}}),t.isClear?t._e():[a("div",{key:"0",style:{"z-index":t.zIndex+1},attrs:{id:"title"}},[a("h1",[t._v("請完成這幅《"+t._s(t.puzzleData.name)+"》")])]),a("button",{key:"1",style:{"z-index":t.zIndex+1},attrs:{id:"reset"},on:{click:t.reset}},[t._v("\n      重新排列\n    ")])],t.isComplete?t._e():a("div",{key:"2",attrs:{id:"puzzle-content"}},t._l(t.puzzleData.puzzlePos,function(e,n){return a("div",{directives:[{name:"drag",rawName:"v-drag"}],key:n+10,staticClass:"puzzle",attrs:{"data-combine":""},on:{mousedown:t.changeZIdx,mouseup:t.getSiblsPos}},[a("img",{style:{position:"absolute",top:e.y+"px",left:e.x+"px"},attrs:{src:t.puzzleImg(n)}})])}),0),a("div",{key:"3",attrs:{id:"complete-puzzle"}},[t.isComplete?a("img",{staticClass:"picture",attrs:{src:n("1bab"),alt:"清本院清明上河圖"}}):t._e()]),t.isClear?a("div",{key:"4",attrs:{id:"intro"}},[a("h1",[t._v(t._s(t.puzzleData.fullName))]),a("h2",[t._v(t._s(t.puzzleData.author))]),a("h2",[t._v(t._s(t.puzzleData.age))]),a("div",{staticClass:"inform"},t._l(t.puzzleData.inform,function(e,n){return a("p",{key:n},[t._v("\n        "+t._s(e)+"\n      ")])}),0),a("button",{staticClass:"again",on:{click:t.playAgain}},[t._v("\n      在玩一次\n    ")])]):t._e()],2)},r=[],o=n("ed45"),l=(n("843a"),n("d8c4"),n("99aa"),n("7a37"),n("bf2f"),n("f2c5"),n("b32b")),i={directives:{drag:function(t){t.onmousedown=function(e){e.stopPropagation();var n=document.querySelectorAll(".puzzle"),a=[];a=JSON.parse("[".concat(t.getAttribute("data-combine"),"]"));for(var r=a.length,o=[],i=0;i<r;i++){for(var s=i+1;s<r;s++)a[i]===a[s]&&(i+=1,s=i);o.push(a[i])}for(var c=[],u=document.getElementById("app").scrollWidth,f=document.getElementById("app").scrollHeight,p=t.offsetHeight,d=t.offsetWidth,m=0,y=o;m<y.length;m++){var h=y[m];c.push({x:e.clientX-n[h].offsetLeft,y:e.clientY-n[h].offsetTop})}document.onmousemove=function(){e.preventDefault();for(var t=!0,a=0,r=c;a<r.length;a++){var i=r[a];if(e.clientX-i.x<0||u-e.clientX+i.x-d<0||e.clientY-i.y<0||f-e.clientY+i.y-p<0){t=!1;break}}if(t)for(var s=0,m=o;s<m.length;s++){var y=Object(l["a"])(m[s],2),h=y[0],b=y[1];n[h].style.left="".concat(e.clientX-c[b].x,"px"),n[h].style.top="".concat(e.clientY-c[b].y,"px")}},document.onmouseup=function(){document.onmousemove=null}}}},data:function(){return{zIndex:10,isClear:!1,isComplete:!1,siblsIdxArr:[],puzzleData:{name:"清明上河圖",xNum:3,yNum:3,bgImgUrl:n("a6d7"),puzzleUrl:"./image/Puzzle-",puzzlePos:[{y:0,x:0},{y:0,x:-27},{y:0,x:0},{y:0,x:0},{y:-27,x:0},{y:0,x:-27},{y:-27,x:0},{y:0,x:-27},{y:-27,x:0}],fullName:"清本院清明上河圖",author:"陳枚、孫祜、金昆、戴洪、程志道",age:"清高宗乾隆元年（1736）",inform:["宋張澤端（活動於西元十二世紀前期）「清明上河圖」是畫史中寫實風俗畫的一件傑作，歷代臨仿者甚多，在故宮即藏有七種不同的本子，其中就屬清院本「清明上河圖」最為有名。","此卷為乾隆元年（一七三六）由宮廷畫院畫師陳枚、孫祜、金昆、戴洪、程志道等五人合繪。 此卷設色鮮麗，用筆圓熟，界畫橋樑、屋宇及人物皆十分細膩嚴謹，是院畫中之極精者。所畫事物甚多，雖失去了宋代古制，但也足以代表明清之際北京風物。"]}}},mounted:function(){this.reset(),this.getSiblsIdxArr(),this.setData()},methods:{puzzleImg:function(t){var e="".concat(this.puzzleData.puzzleUrl).concat(t+1,".png"),a=n("f4cb")(e);return a},getSiblsIdxArr:function(){var t=[],e=this.puzzleData.xNum,n=this.puzzleData.xNum*this.puzzleData.yNum,a=!0,r=!1,o=void 0;try{for(var l,i=n[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;switch(s%e){case 0:t=[s-e,s+1,s+e];break;case e-1:t=[s-e,s-1,s+e];break;default:t=[s-e,s-1,s+1,s+e]}t=t.filter(function(t){return t>=0&&t<n}),this.siblsIdxArr.push(t)}}catch(c){r=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}},setData:function(){document.querySelectorAll(".puzzle").forEach(function(t,e){t.setAttribute("data-combine",e)})},changeZIdx:function(t){var e=this,n=document.querySelectorAll(".puzzle"),a=JSON.parse("[".concat(n[Object(o["a"])(n).indexOf(t.currentTarget)].getAttribute("data-combine"),"]"));a.forEach(function(t){n[t].style.zIndex=e.zIndex}),this.zIndex+=1},combine:function(t,e,n,a,r){var o=n[t],l=n[e],i=this.siblsIdxArr,s=JSON.parse("[".concat(o.getAttribute("data-combine"),"]")),c=JSON.parse("[".concat(l.getAttribute("data-combine"),"]"));s.forEach(function(){c.forEach(function(){i[o].indexOf(l)>=0&&i[o].splice(i[o].indexOf(l),1),i[l].indexOf(o)>=0&&i[l].splice(i[l].indexOf(o),1)})}),this.combinePuzzle(o,l,n,a,r,s,c),this.combineData(o,l,n)},combinePuzzle:function(t,e,n,a,r,o,i){var s=parseInt(t.style.top,10),c=parseInt(t.style.left,10),u=parseInt(e.style.top,10),f=parseInt(e.style.left,10),p=[];i.forEach(function(t){p.push({top:parseInt(n[t].style.top,10)-u,left:parseInt(n[t].style.left,10)-f})});var d=!0,m=!1,y=void 0;try{for(var h,b=i[Symbol.iterator]();!(d=(h=b.next()).done);d=!0){var v=Object(l["a"])(h.value,2),z=v[0],g=v[1];n[z].style.top="".concat(s+a+p[g].top,"px"),n[z].style.left="".concat(c+r+p[g].left,"px")}}catch(x){m=!0,y=x}finally{try{d||null==b.return||b.return()}finally{if(m)throw y}}o.forEach(function(t){n[t].classList.add("box-shadow"),setTimeout(function(){n[t].classList.remove("box-shadow")},500)}),i.forEach(function(t){n[t].classList.add("box-shadow"),setTimeout(function(){n[t].classList.remove("box-shadow")},500)})},combineData:function(t,e,n){var a="".concat(t.getAttribute("data-combine"),", ").concat(e.getAttribute("data-combine")),r=JSON.parse("[".concat(t.getAttribute("data-combine"),"]")),o=JSON.parse("[".concat(e.getAttribute("data-combine"),"]")),l=!0,i=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var f=c.value;n[f].setAttribute("data-combine",a)}}catch(v){i=!0,s=v}finally{try{l||null==u.return||u.return()}finally{if(i)throw s}}var p=!0,d=!1,m=void 0;try{for(var y,h=o[Symbol.iterator]();!(p=(y=h.next()).done);p=!0){var b=y.value;n[b].setAttribute("data-combine",a)}}catch(v){d=!0,m=v}finally{try{p||null==h.return||h.return()}finally{if(d)throw m}}},complete:function(){var t=this;setTimeout(function(){var e=document.querySelector(".puzzle"),n=document.querySelector("#complete-puzzle"),a=document.querySelector("#title"),r=document.querySelector("#reset"),o=document.getElementById("app").scrollWidth,l=document.getElementById("app").scrollHeight;t.isComplete=!0,n.style.top="".concat(parseInt(e.style.top,10)+18.5,"px"),n.style.left="".concat(parseInt(e.style.left,10)+18.5,"px"),n.style.transform="translate(".concat((o-580)/2-parseInt(n.style.left,10),"px, ").concat((l-580)/2-parseInt(n.style.top,10)+18.5,"px)"),a.style.opacity=0,r.style.opacity=0,setTimeout(function(){t.isClear=!0,document.querySelector(".picture").classList.add("box-shadow"),setTimeout(function(){var t=document.querySelector("#intro"),e=t.offsetWidth,a=30;t.style.opacity=1,t.style.transform="translateX( ".concat((540+a)/2,"px )"),document.querySelector("#complete-puzzle").style.transform="translate(".concat((o-580)/2-parseInt(n.style.left,10)-(e+a)/2,"px, ").concat((l-580)/2-parseInt(n.style.top,10)+18.5,"px)")},1300)},2e3)},1e3)},getSiblsPos:function(t){var e=this,n=document.querySelectorAll(".puzzle"),a=JSON.parse("[".concat(t.currentTarget.getAttribute("data-combine"),"]")),r=this.puzzleData.xNum;a.forEach(function(t){var a=n[t].offsetTop,o=n[t].offsetLeft;e.siblsIdxArr[t].forEach(function(l){switch(l-t){case r:Math.abs(n[l].offsetTop-a-144)<8&&Math.abs(n[l].offsetLeft-o)<8&&e.combine(l,t,n,-144,0);break;case 1:Math.abs(n[l].offsetTop-a)<8&&Math.abs(n[l].offsetLeft-o-144)<8&&e.combine(l,t,n,0,-144);break;case-1:Math.abs(n[l].offsetTop-a)<8&&Math.abs(n[l].offsetLeft-o+144)<8&&e.combine(l,t,n,-0,144);break;case-r:Math.abs(n[l].offsetTop-a+144)<8&&Math.abs(n[l].offsetLeft-o)<8&&e.combine(l,t,n,144,0);break;default:}})});var o=JSON.parse("[".concat(t.currentTarget.getAttribute("data-combine"),"]"));9===o.length&&this.complete()},reset:function(){var t=this.puzzleData.xNum*this.puzzleData.yNum,e=document.getElementById("app").scrollWidth,n=document.getElementById("app").scrollHeight;this.zIndex=10,this.siblsIdxArr=[],this.isClear=!1,this.isComplete=!1;var a=!0,r=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value,c=document.querySelectorAll(".puzzle")[s],u=c.offsetWidth,f=c.offsetHeight,p=100+(n-f-200)*Math.random(),d=(e-u)*Math.random(),m=Math.floor(10*Math.random());c.style.top="".concat(p,"px"),c.style.left="".concat(d,"px"),c.style.zIndex=m,c.style.opacity=1}}catch(y){r=!0,o=y}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}this.setData(),this.getSiblsIdxArr()},checkPuzzle:function(){var t=this;null==document.querySelector(".puzzle")?setTimeout(function(){t.checkPuzzle()},100):(this.reset(),this.getSiblsIdxArr(),this.setData())},playAgain:function(){this.isClear=!1,this.isComplete=!1,document.querySelector("#complete-puzzle").style.transform="scale(.8)",document.querySelector("#intro").style.transform="",this.checkPuzzle()}}},s=i,c=(n("63f7"),n("f9e0")),u=Object(c["a"])(s,a,r,!1,null,null,null);e["a"]=u.exports},"1bab":function(t,e,n){t.exports=n.p+"img/img-Qingming.80bd3aeb.png"},"63f7":function(t,e,n){"use strict";var a=n("db33"),r=n.n(a);r.a},a6d7:function(t,e,n){t.exports=n.p+"img/img-bg-Qingming.3ddb7040.png"},db33:function(t,e,n){},f4cb:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="f4cb"}});
//# sourceMappingURL=app.0905b77e.js.map